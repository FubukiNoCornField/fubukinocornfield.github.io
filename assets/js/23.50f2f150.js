(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{236:function(a,t,e){"use strict";e.r(t);var s=e(0),r=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"开发规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发规范"}},[a._v("#")]),a._v(" 开发规范")]),a._v(" "),e("h2",{attrs:{id:"搭建本地开发环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搭建本地开发环境"}},[a._v("#")]),a._v(" 搭建本地开发环境")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),e("p",[a._v("本文档站中的所有命令请在 Command Prompt（on Windows）或 Terminal（on *NIX）中使用。")])]),a._v(" "),e("p",[a._v("首先，将 CornField 的主代码库 clone 到本地。")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/FubukiNoCornField/CornField.git\n")])])]),e("p",[a._v("如果有编辑文档的需要的话则需拉取子模块：")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" submodule update --remote\n")])])]),e("p",[a._v("使用你的名字或昵称新建一个新的分支并签出。")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" branch "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("nickname"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" checkout "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("nickname"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("p",[a._v("任何仅针对文档的更新只需提交更改并推送到 "),e("a",{attrs:{href:"https://github.com/FubukiNoCornField/CornField-Docs",target:"_blank",rel:"noopener noreferrer"}},[a._v("CornField-Docs"),e("OutboundLink")],1),a._v("。该代码库已经启用了 Travis CI。")]),a._v(" "),e("p",[a._v("在项目的根目录下以及"),e("code",[a._v("packages")]),a._v("文件夹下的各个目录中分别执行"),e("code",[a._v("npm i")]),a._v("。")]),a._v(" "),e("p",[a._v("最后一步，在终端中键入 "),e("code",[a._v("npm install -g git-cz commitizen")]),a._v(" 并回车。 "),e("code",[a._v("git-cz")]),a._v(" 是一个自动格式化提交信息的 CLI 工具。")]),a._v(" "),e("p",[a._v("现在，你的开发环境以及准备就绪。推荐使用 "),e("a",{attrs:{href:"https://code.visualstudio.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("VS Code"),e("OutboundLink")],1),a._v(" 进行开发。")]),a._v(" "),e("h2",{attrs:{id:"搭建本地数据库环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搭建本地数据库环境"}},[a._v("#")]),a._v(" 搭建本地数据库环境")]),a._v(" "),e("p",[a._v("在本地下载 "),e("code",[a._v("MongoDB")]),a._v(" 和 "),e("code",[a._v("Redis")]),a._v(" 并安装。确保服务启动且监听默认端口。")]),a._v(" "),e("h2",{attrs:{id:"docker-包生成及推送"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-包生成及推送"}},[a._v("#")]),a._v(" Docker 包生成及推送")]),a._v(" "),e("p",[a._v("我们使用 GitHub Actions 进行 Docker Image 的生成及推送。")]),a._v(" "),e("h2",{attrs:{id:"线上部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#线上部署"}},[a._v("#")]),a._v(" 线上部署")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如果旧的 Images 已经存在则需要先行移除")]),a._v("\ndocker rmi afanyiyu/cornfield-frontend "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\ndocker rmi afanyiyu/cornfield-backend "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n\ndocker run -d -p "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2170")]),a._v(":2170 --env-file /cornfield/env --name cornfield-frontend --rm afanyiyu/cornfield-frontend\n\ndocker run -d -p "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2171")]),a._v(":2171 --env-file /cornfield/env --name cornfield-backend --rm afanyiyu/cornfield-backend\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);